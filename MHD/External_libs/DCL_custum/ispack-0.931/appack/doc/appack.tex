%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Copyright (C) 1998-2010 Keiichi Ishioka			       %
% 								       %
% この著作権表示が記載してあるならば, どのような媒体にでも何も手を加え %
% ずに複写して再配付することを許可します. これらのドキュメントとその使 % 
% 用許諾を他の言語に翻訳する際は, 以下の条件に従って下さい.	       %
% 								       %
% 他の言語に翻訳する際に, 他の言語での口語表現への変更の範囲を越えて故 %
% 意に意味を変更しないこと.					       %
%								       %
% 翻訳した使用許諾には, それが翻訳であること, また原文の使用許諾が翻訳 %
% 全体に依然適用されることを明示すること.			       %
%								       %
% ハイパーテキストの場合, 同一サイト上で原文のコピーを保守すること. ま %
% た, 翻訳したハイパーテキストのページからその原文へのリンクを提供する %
% こと.								       %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%履歴   95/10/13 石岡圭一 (version 0.0)
%履歴 2009/08/20 石岡圭一 (version 0.1)
%        apalgn を追加
%履歴 2010/02/26 石岡圭一 (version 0.2)
%        aprand, apnorm を追加
%
\documentclass[a4j]{jarticle}

\title{APPACK使用の手引 (version 0.2)}
\author{石岡 圭一  (2010/02/26)}
\date{}

\begin{document}

\maketitle

\section{概要}

これは数値計算と直接関係ないような応用的なサブルーチンを集めたパッケー
ジである.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{サブルーチンのリスト}

\vspace{1em}
\begin{tabular}{ll}
{\tt APTIME} & 現在のCPU-timeを通知する\\
{\tt APALGN} & メモリ境界へのアライメントのためにずらすべきバイト数を調べる\\
{\tt APRAND} & 一様乱数の生成\\
{\tt APNORM} & 正規乱数の生成\\
\end{tabular}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{サブルーチンの説明}

\subsection{APTIME}

\begin{enumerate}

\item 機能 

現在のCPU-timeを通知する

\item 定義

\item 呼び出し方法 
    
{\tt APTIME(SEC)}
  
\item パラメーターの説明 
    
\begin{tabular}{lll}
{\tt SEC} & {\tt (D)} & 出力. 現在のCPU-time(秒単位)
\end{tabular}

\item 備考

\end{enumerate}

%----------------------------------------------------------------------

\subsection{APALGN}

\begin{enumerate}

\item 機能 

メモリ境界へのアライメントのためにずらすべきバイト数を調べる.

\item 定義

FFTJ や SJPACK で SSE2命令を利用するために, 利用する配列の先頭
がメモリ上で 16バイト境界に割り当てられていなければならない
(アライメント)が,
これをコンパイラが必ずしも自動ではやってくれるとは限らない.
本サブルーチンは, 与えられた文字型配列に対して, その先頭から
何バイトずらせば所定のアライメントを満すかを調べるものである.

\item 呼び出し方法 
    
{\tt APALGN(C,NALIGN,IS)}
  
\item パラメーターの説明 
    
\begin{tabular}{lll}
{\tt C} & {\tt (C(*)*1)} & 入力. 任意の長さの文字型配列.\\
{\tt NALIGN} & {\tt (I)} & 入力. 満したいアライメント(2の羃乗)\\
{\tt IS} & {\tt (I)} & 出力. アライメントを満すためにずらすべきバイト数
\end{tabular}

\item 備考

{\tt CHARACTER C(0:N+NALIGN-2)*1} ({\tt N} は任意の大きさ) と宣言
されている場合, {\tt CALL APALGN(C,NALIGN,IS)} すると, {\tt C(IS)}
は {\tt NALIGN}バイトのアライメントを満し, そこを先頭にして {\tt C}
は {\tt N}バイト以上の領域を確保できることになる({\tt IS}$<${\tt NALIGN})
なので.

\end{enumerate}

%----------------------------------------------------------------------

\subsection{APRAND}

\begin{enumerate}

\item 機能 

線形合同法により, 一様乱数を生成する.

\item 定義

線形合同法により擬似乱数列を生成し, それから$(0,1)$区間の一様
乱数を与える. 単純な線形合同法なので乱数の品質は高くない.
モンテカルロ法など, 乱数の品質が重要となるような場合には
メルセンヌツイスタのような高度な擬似乱数生成法を用いるべきである.

\item 呼び出し方法 
    
{\tt APRAND(ISEED,R)}
  
\item パラメーターの説明 
    
\begin{tabular}{lll}
{\tt ISEED} & {\tt (I)} & 入力および出力. 乱数の種\\
{\tt R} & {\tt (D)} & 出力. $(0,1)$区間の(擬似)一様乱数
\end{tabular}

\item 備考

実際に利用する場合には, {\tt ISEED}に適当な初期値を与えた後,
{\tt APRAND(ISEED,R)}を繰り返し呼出せばよい.

\end{enumerate}

%----------------------------------------------------------------------

\subsection{APNORM}

\begin{enumerate}

\item 機能 

Box-Muller法により, 正規乱数を生成する.

\item 定義

Box-Muller法により, 正規乱数を生成する. 内部では
擬似一様乱数生成器として {\tt APRAND} を用いて
いるので, やはり乱数の品質が重要となるような場合には
メルセンヌツイスタのようなものをベースにしたものに
置き換えるべきである.

\item 呼び出し方法 
    
{\tt APNORM(ISEED,R)}
  
\item パラメーターの説明 
    
\begin{tabular}{lll}
{\tt ISEED} & {\tt (I)} & 入力および出力. 乱数の種\\
{\tt R} & {\tt (D)} & 出力. 平均0標準偏差1の(擬似)正規乱数
\end{tabular}

\item 備考

実際に利用する場合には, {\tt ISEED}に適当な初期値を与えた後,
{\tt APNORM(ISEED,R)}を繰り返し呼出せばよい.

\end{enumerate}

\end{document}
