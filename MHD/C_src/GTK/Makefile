#
#
#

KEMO_GTK_DIR = $$(C_SRCDIR)/GTK
SRC_GTK_C = $(shell ls *.c)
INC_GTK_C = $(addsuffix .h,$(basename $(SRC_GTK_C)) )
OBJ_GTK_C = $(addsuffix .o,$(basename $(SRC_GTK_C)) )

#
#  ------------------------------------------------------------------
#

dir_list:
	@echo 'KEMO_GTK_DIR =  $(KEMO_GTK_DIR)'      >> $(MAKENAME)

lib_name:

lib_archve:
	@echo '	''$$(AR)' '$$(ARFLUGS)' rcsv '$$@' '$$(OBJ_GTK_C)' >> $(MAKENAME)


mod_list:
	@echo  OBJ_GTK_C=  \\ >> $(MAKENAME)
	@echo  $(OBJ_GTK_C)   >> $(MAKENAME)
	@echo   >> $(MAKENAME)


module:
	@cat Makefile.depends >> $(MAKENAME)

depends: Makefile.depends

Makefile.depends: $(SRC_GTK_C) $(INC_GTK_C)
	echo 'Construct dependencies in C_src/GTK'
	@echo '#' > $(MAKENAME).tmp
	@for sources in $(SRC_GTK_C) ; do \
		( \
		cd $(MAKEDIR); \
		$(MPICC) $(DEPFLAGS) $(OPTFLAGS_GL) $(C_INCLUDE) $(GTK3_CFLAGS) $(MHDDIR)/C_src/GTK/$$sources >> $(MAKENAME).tmp; \
		echo '	''$$(CC)' -c '$$(OPTFLAGS_GL) $$(C_INCLUDE) $$(GTK3_CFLAGS) $$<' >> $(MAKENAME).tmp \
		) \
	done
	@sed -e 's@'$(MHDDIR)/C_src'@'$$\(C_SRCDIR\)'@g' $(MAKENAME).tmp >  $(MHDDIR)/C_src/GTK/Makefile.depends
	@rm $(MAKENAME).tmp

clean:
	rm -f *.o $(TARGET) *.mod *~
